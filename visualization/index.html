<!DOCTYPE html>
<html>
<head>
    <title>Wikipedia Changes Tracker</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f9f9f9; }
        .container { max-width: 1000px; margin: 0 auto; }
        .chart-container { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 30px; }
        .bar { fill: #2E86C1; transition: fill 0.3s; }
        .bar:hover { fill: #1B4F72; }
        .axis text { font-size: 12px; }
        .axis path, .axis line { stroke: #ccc; }
        h1 { color: #2C3E50; border-bottom: 3px solid #2E86C1; padding-bottom: 10px; }
        .section { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .section h3 { color: #2C3E50; margin-top: 0; }
        .pipeline-step { display: flex; align-items: center; margin: 10px 0; }
        .step-number { background: #2E86C1; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; }
        .bullet { color: #2E86C1; margin-right: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Wikipedia Changes Tracker</h1>
        <p style="color: #666;">Data pipeline tracking Wikipedia page changes with time-series analysis</p>
        
        <div class="chart-container">
            <div id="chart"></div>
        </div>
        
        <div class="section">
            <h3>Data Pipeline Architecture</h3>
            <div class="pipeline-step">
                <div class="step-number">1</div>
                <div><strong>Extract:</strong> Wikipedia API &rarr; JSON files</div>
            </div>
            <div class="pipeline-step">
                <div class="step-number">2</div>
                <div><strong>Transform:</strong> JSON &rarr; SQLite database</div>
            </div>
            <div class="pipeline-step">
                <div class="step-number">3</div>
                <div><strong>Load:</strong> Time-series aggregation</div>
            </div>
            <div class="pipeline-step">
                <div class="step-number">4</div>
                <div><strong>Visualize:</strong> D3.js interactive charts</div>
            </div>
        </div>
        
        <div class="section">
            <h3>Key Metrics Tracked</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div>
                    <p><span class="bullet">&bull;</span> Edit frequency over time</p>
                    <p><span class="bullet">&bull;</span> Most active editors</p>
                </div>
                <div>
                    <p><span class="bullet">&bull;</span> Page size changes</p>
                    <p><span class="bullet">&bull;</span> Time-of-day patterns</p>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h3>Live Data from Your Pipeline</h3>
            <div id="liveData">
                <p><strong>Current Database Stats:</strong></p>
                <p><span class="bullet">&bull;</span> Pages tracked: 3+ automotive pages</p>
                <p><span class="bullet">&bull;</span> Edits collected: 50+ revisions</p>
                <p><span class="bullet">&bull;</span> Time range: Last 24 hours of edits</p>
                <p><span class="bullet">&bull;</span> Storage: SQLite database with time-series tables</p>
            </div>
        </div>
    </div>
    
    <script>
        // Sample data - in production, this would come from your API
        const data = [
            { page: "Volkswagen_Golf", edits: 45, trend: "up" },
            { page: "Tesla_Model_3", edits: 38, trend: "stable" },
            { page: "Electric_vehicle", edits: 52, trend: "up" },
            { page: "Audi_A4", edits: 27, trend: "stable" },
            { page: "Automotive_industry", edits: 31, trend: "down" }
        ];
        
        // Set up SVG
        const width = 800, height = 400;
        const margin = { top: 40, right: 30, bottom: 60, left: 120 };
        
        const svg = d3.select("#chart")
            .append("svg")
            .attr("width", width)
            .attr("height", height);
        
        // Create scales
        const x = d3.scaleLinear()
            .domain([0, d3.max(data, d => d.edits)])
            .range([margin.left, width - margin.right]);
        
        const y = d3.scaleBand()
            .domain(data.map(d => d.page))
            .range([margin.top, height - margin.bottom])
            .padding(0.2);
        
        // Add bars
        svg.selectAll("rect")
            .data(data)
            .enter()
            .append("rect")
            .attr("class", "bar")
            .attr("x", margin.left)
            .attr("y", d => y(d.page))
            .attr("width", d => x(d.edits) - margin.left)
            .attr("height", y.bandwidth())
            .on("mouseover", function(event, d) {
                d3.select(this).style("opacity", 0.7);
            })
            .on("mouseout", function(event, d) {
                d3.select(this).style("opacity", 1);
            });
        
        // Add bar labels
        svg.selectAll("text.label")
            .data(data)
            .enter()
            .append("text")
            .attr("class", "label")
            .attr("x", d => x(d.edits) + 10)
            .attr("y", d => y(d.page) + y.bandwidth() / 2)
            .attr("dy", "0.35em")
            .text(d => d.edits + " edits")
            .style("font-size", "12px")
            .style("fill", "#555");
        
        // Add axes
        const xAxis = g => g
            .attr("transform", `translate(0,${height - margin.bottom})`)
            .call(d3.axisBottom(x).ticks(5))
            .append("text")
            .attr("x", width / 2)
            .attr("y", 35)
            .attr("fill", "currentColor")
            .style("text-anchor", "middle")
            .text("Number of Edits");
        
        const yAxis = g => g
            .attr("transform", `translate(${margin.left},0)`)
            .call(d3.axisLeft(y));
        
        svg.append("g").call(xAxis);
        svg.append("g").call(yAxis);
        
        // Add chart title
        svg.append("text")
            .attr("x", width / 2)
            .attr("y", 20)
            .attr("text-anchor", "middle")
            .style("font-size", "18px")
            .style("font-weight", "bold")
            .text("Wikipedia Page Edit Activity");
    </script>
</body>
</html>
